import{__decorate as t,__metadata as e}from"tslib";import{css as i,LitElement as s,html as o}from"lit";import{property as a,customElement as n}from"lit/decorators.js";let r=class extends s{constructor(){super(...arguments),this.apiKey="",this.version="3.48",this.styles={},this.zoom=8,this.fitToMarkers=!1,this.mapType="roadmap",this.centerLatitude=-34.397,this.centerLongitude=150.644,this.language="",this.mapId="DEMO_MAP_ID",this.map=null}attributeChangedCallback(t,e,i){super.attributeChangedCallback(t,e,i),this.map&&e!==i&&null!==i&&("center-latitude"===t||"center-longitude"===t?this.map.setCenter({lat:this.centerLatitude,lng:this.centerLongitude}):"zoom"===t&&this.map.setZoom(this.zoom))}dispatchViewChanged(){this.dispatchEvent(new CustomEvent("view_changed",{detail:{center:this.map.getCenter().toJSON(),zoom:this.map.getZoom()},bubbles:!0,composed:!0}))}initGMap(){if(null!=this.map)return;const t=this.shadowRoot.getElementById("api");null!=t&&!0===t.libraryLoaded&&(this.map=new google.maps.Map(this.shadowRoot.getElementById("map"),this.getMapOptions()),this.map.addListener("bounds_changed",(()=>{this.dispatchEvent(new CustomEvent("bounds_changed",{detail:this.map.getBounds().toJSON(),bubbles:!0,composed:!0}))})),this.map.addListener("tilesloaded",(()=>{this.dispatchEvent(new CustomEvent("tilesloaded",{detail:this.map.getBounds().toJSON(),bubbles:!0,composed:!0}))})),this.map.addListener("center_changed",(()=>{this.dispatchEvent(new CustomEvent("center_changed",{detail:this.map.getCenter().toJSON(),bubbles:!0,composed:!0})),this.dispatchViewChanged()})),this.map.addListener("zoom_changed",(()=>{this.dispatchEvent(new CustomEvent("zoom_changed",{detail:{zoom:this.map.getZoom()},bubbles:!0,composed:!0})),this.dispatchViewChanged()})),this.map.addListener("click",(t=>{"placeId"in t&&(t.stop(),this.dispatchEvent(new CustomEvent("place_click",{detail:{placeId:t.placeId},bubbles:!0,composed:!0})))})),this.updateMarkers(),this.updateShapes(),this.updateControls())}getMapOptions(){return{zoom:this.zoom,center:{lat:this.centerLatitude,lng:this.centerLongitude},mapTypeId:this.mapType,styles:this.styles,mapId:this.mapId}}mapApiLoaded(){this.initGMap()}connectedCallback(){super.connectedCallback(),this.initGMap()}updated(t){super.updated(t),this.map?((t.has("centerLatitude")||t.has("centerLongitude"))&&(t.get("centerLatitude"),t.get("centerLongitude"),this.map.setCenter({lat:this.centerLatitude,lng:this.centerLongitude})),t.has("zoom")&&(t.get("zoom"),this.map.setZoom(this.zoom))):console.log("Map not initialized yet, skipping update")}attachChildrenToMap(t){if(this.map)for(const e of t)e.changeMap(this.map)}detachChildrenFromMap(t){if(this.map)for(const e of t)e.changeMap(null)}observeMarkers(){this.markerObserverSet||(this.addEventListener("selector-items-changed",(()=>{this.updateMarkers()})),this.markerObserverSet=!0)}updateMarkers(){var t;this.observeMarkers();const e=this.shadowRoot.getElementById("markers-selector");if(!e)return;const i=e.items;if(this.markers&&i.length===this.markers.length){if(0===i.filter((t=>this.markers&&-1===this.markers.indexOf(t))).length)return}const s=this.checkBoundsChanged(this.markers,i),o=(null===(t=this.markers)||void 0===t?void 0:t.filter((t=>-1===i.indexOf(t))))||[];this.detachChildrenFromMap(o),this.markers=i,this.attachChildrenToMap(this.markers),this.fitToMarkers&&s&&this.fitToMarkersChanged()}updateShapes(){const t=this.shadowRoot.getElementById("shapes-selector");if(t){this.shapes=t.items;for(const t of this.shapes)t.attachToMap(this.map)}}updateControls(){const t=this.shadowRoot.getElementById("controls-selector");if(t){this.controls=t.items;for(const t of this.controls)t.changeMap(this.map)}}fitToMarkersChanged(t=0){if(this.map&&this.fitToMarkers&&this.markers.length>0){const e=new google.maps.LatLngBounds;for(const t of this.markers)e.extend(new google.maps.LatLng(t.latitude,t.longitude));const i=this.getBoundingClientRect();if(0===i.width||0===i.height){console.log("Invalid DOM width or height for lit-google-map");return void setTimeout((()=>{this.fitToMarkersChanged(t+1)}),2**t*100)}this.markers.length>1&&this.map.fitBounds(e,0),this.map.setCenter(e.getCenter())}}checkBoundsChanged(t,e){const i=e.filter((e=>!t||!t.includes(e))),s=null==t?void 0:t.filter((t=>!e||!e.includes(t)));return i.length>0||s.length>0}deselectMarker(t){}deselectShape(t){}render(){return o`
      <lit-google-maps-api
        id="api"
        api-key="${this.apiKey}"
        version="${this.version}"
        language="${this.language}"
        map-id="${this.mapId}"
        @api-load=${()=>this.mapApiLoaded()}
      >
      </lit-google-maps-api>
      <lit-selector
        id="markers-selector"
        selected-attribute="open"
        activate-event="google-map-marker-open"
        @google-map-marker-close=${t=>this.deselectMarker(t)}
      >
        <slot id="markers" name="markers"></slot>
      </lit-selector>
      <lit-selector
        id="shapes-selector"
        selected-attribute="open"
        activate-event="google-map-shape-open"
        @google-map-shape-close=${t=>this.deselectShape(t)}
      >
        <slot id="shapes" name="shapes"></slot>
      </lit-selector>
      <lit-selector
        id="controls-selector"
        selected-attribute="open"
        activate-event="google-map-control-activate"
      >
        <slot id="controls" name="controls"></slot>
      </lit-selector>
      <div id="map"></div>
    `}};r.styles=i`
    #map {
      width: 100%;
      height: 100%;
    }
  `,t([a({type:String,attribute:"api-key"}),e("design:type",Object)],r.prototype,"apiKey",void 0),t([a({type:String}),e("design:type",Object)],r.prototype,"version",void 0),t([a({type:Object}),e("design:type",Object)],r.prototype,"styles",void 0),t([a({type:Number}),e("design:type",Object)],r.prototype,"zoom",void 0),t([a({type:Boolean,attribute:"fit-to-markers"}),e("design:type",Object)],r.prototype,"fitToMarkers",void 0),t([a({type:String,attribute:"map-type"}),e("design:type",Object)],r.prototype,"mapType",void 0),t([a({type:Number,attribute:"center-latitude"}),e("design:type",Object)],r.prototype,"centerLatitude",void 0),t([a({type:Number,attribute:"center-longitude"}),e("design:type",Object)],r.prototype,"centerLongitude",void 0),t([a({type:String}),e("design:type",Object)],r.prototype,"language",void 0),t([a({type:String,attribute:"map-id"}),e("design:type",Object)],r.prototype,"mapId",void 0),r=t([n("lit-google-map")],r);let l=class extends s{constructor(){super(...arguments),this.centerLatitude=-34.397,this.centerLongitude=150.644,this.radius=1e5,this.fillColor="#FF0000",this.fillOpacity=.35,this.strokeColor="#FF0000",this.strokeOpacity=.8,this.strokeWeight=2,this.map=null,this.circle=null}attributeChangedCallback(t,e,i){var s;switch(super.attributeChangedCallback(t,e,i),t){case"center-latitude":case"center-longitude":this.updateCenter();break;case"radius":null===(s=this.circle)||void 0===s||s.setRadius(this.radius)}}updateCenter(){var t;null===(t=this.circle)||void 0===t||t.setCenter(new google.maps.LatLng(this.centerLatitude,this.centerLongitude))}attachToMap(t){this.map=t,this.mapChanged()}mapChanged(){this.circle&&(this.circle.setMap(null),google.maps.event.clearInstanceListeners(this.circle)),this.map&&this.map instanceof google.maps.Map&&this.mapReady()}mapReady(){this.circle=new google.maps.Circle({map:this.map,strokeColor:this.strokeColor,strokeOpacity:this.strokeOpacity,strokeWeight:this.strokeWeight,fillColor:this.fillColor,fillOpacity:this.fillOpacity,center:{lat:this.centerLatitude,lng:this.centerLongitude},radius:this.radius})}};t([a({type:Number,attribute:"center-latitude"}),e("design:type",Object)],l.prototype,"centerLatitude",void 0),t([a({type:Number,attribute:"center-longitude"}),e("design:type",Object)],l.prototype,"centerLongitude",void 0),t([a({type:Number}),e("design:type",Object)],l.prototype,"radius",void 0),t([a({type:String,attribute:"fill-color"}),e("design:type",Object)],l.prototype,"fillColor",void 0),t([a({type:Number,attribute:"fill-opacity"}),e("design:type",Object)],l.prototype,"fillOpacity",void 0),t([a({type:String,attribute:"stroke-color"}),e("design:type",Object)],l.prototype,"strokeColor",void 0),t([a({type:Number,attribute:"stroke-opacity"}),e("design:type",Object)],l.prototype,"strokeOpacity",void 0),t([a({type:Number,attribute:"stroke-weight"}),e("design:type",Object)],l.prototype,"strokeWeight",void 0),l=t([n("lit-google-map-circle")],l);let c=class extends s{constructor(){super(...arguments),this.position="RIGHT_BOTTOM",this.label="My Location",this.disabled=!1,this.map=null,this.controlDiv=null,this.controlButton=null,this.isRequesting=!1}changeMap(t){this.map=t,this.mapChanged()}mapChanged(){this.controlDiv&&this.map&&(this.controlDiv=null,this.controlButton=null),this.map&&this.map instanceof google.maps.Map&&this.mapReady()}mapReady(){this.controlDiv=this.createControlButton();const t=google.maps.ControlPosition[this.position];void 0!==t&&this.map.controls[t].push(this.controlDiv)}createControlButton(){const t=document.createElement("div");t.style.margin="10px";const e=document.createElement("button");return e.type="button",e.title=this.label,e.setAttribute("aria-label",this.label),e.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">\n        <path fill="currentColor" d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>\n      </svg>\n    ',Object.assign(e.style,{backgroundColor:"#fff",border:"0",borderRadius:"2px",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",cursor:"pointer",padding:"10px",display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",color:"#666"}),e.addEventListener("mouseenter",(()=>{this.disabled||this.isRequesting||(e.style.backgroundColor="#f8f8f8")})),e.addEventListener("mouseleave",(()=>{this.disabled||this.isRequesting||(e.style.backgroundColor="#fff")})),e.addEventListener("click",(()=>{this.disabled||this.isRequesting||this.handleLocationRequest()})),this.controlButton=e,t.appendChild(e),t}async handleLocationRequest(){if(navigator.geolocation){this.isRequesting=!0,this.setLoadingState(!0),this.dispatchEvent(new CustomEvent("location-requested",{bubbles:!0,composed:!0}));try{const t=await this.getCurrentPosition(),e=t.coords.latitude,i=t.coords.longitude;this.map.setCenter({lat:e,lng:i}),this.map.setZoom(14),this.dispatchEvent(new CustomEvent("location-found",{detail:{lat:e,lng:i},bubbles:!0,composed:!0}))}catch(t){let e="Unable to retrieve your location",i=-1;t instanceof GeolocationPositionError&&(i=t.code,t.code===t.PERMISSION_DENIED?e="Location access denied. Please enable location permissions.":t.code===t.TIMEOUT?e="Location request timed out. Please try again.":t.code===t.POSITION_UNAVAILABLE&&(e="Location information is unavailable.")),this.dispatchEvent(new CustomEvent("location-error",{detail:{code:i,message:e},bubbles:!0,composed:!0}))}finally{this.isRequesting=!1,this.setLoadingState(!1)}}else this.dispatchEvent(new CustomEvent("location-error",{detail:{code:-1,message:"Geolocation is not supported by your browser"},bubbles:!0,composed:!0}))}getCurrentPosition(){return new Promise(((t,e)=>{navigator.geolocation.getCurrentPosition(t,e,{timeout:1e4,enableHighAccuracy:!0})}))}setLoadingState(t){if(this.controlButton)if(t){this.controlButton.style.backgroundColor="#f0f0f0",this.controlButton.style.cursor="wait";const t=this.controlButton.querySelector("svg");if(t){t.style.animation="spin 1s linear infinite";const e=document.createElement("style");e.textContent="\n          @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n          }\n        ",document.querySelector("style[data-location-button-spin]")||(e.setAttribute("data-location-button-spin","true"),document.head.appendChild(e))}}else{this.controlButton.style.backgroundColor="#fff",this.controlButton.style.cursor="pointer";const t=this.controlButton.querySelector("svg");t&&(t.style.animation="")}}attributeChangedCallback(t,e,i){super.attributeChangedCallback(t,e,i),"disabled"===t&&this.controlButton&&(this.disabled?(this.controlButton.style.backgroundColor="#f0f0f0",this.controlButton.style.cursor="not-allowed",this.controlButton.style.opacity="0.6"):(this.controlButton.style.backgroundColor="#fff",this.controlButton.style.cursor="pointer",this.controlButton.style.opacity="1"))}};t([a({type:String,reflect:!0}),e("design:type",Object)],c.prototype,"position",void 0),t([a({type:String,reflect:!0}),e("design:type",Object)],c.prototype,"label",void 0),t([a({type:Boolean,reflect:!0}),e("design:type",Object)],c.prototype,"disabled",void 0),c=t([n("lit-google-map-location-button")],c);let h=class extends s{constructor(){super(...arguments),this.latitude=0,this.longitude=0,this.zIndex=0,this.open=!1,this.id=null,this.glyph=null,this.glyphColor=null,this.background=null,this.borderColor=null,this.scale=null,this.map=null,this.marker=null,this.pin=null}attributeChangedCallback(t,e,i){switch(super.attributeChangedCallback(t,e,i),t){case"open":this.openChanged();break;case"latitude":case"longitude":this.updatePosition();break;case"glyph":this.pin&&(this.pin.glyph=this.glyph);break;case"glyphColor":this.pin&&(this.pin.glyphColor=this.glyphColor);break;case"background":this.pin&&(this.pin.background=this.background);break;case"borderColor":this.pin&&(this.pin.borderColor=this.borderColor);break;case"scale":this.pin&&(this.pin.scale=this.scale);break;case"z-index":this.marker&&(this.marker.zIndex=this.zIndex)}}openChanged(){this.info&&(this.open?(this.info.open(this.map,this.marker),this.dispatchEvent(new CustomEvent("google-map-marker-open",{bubbles:!0}))):(this.info.close(),this.dispatchEvent(new CustomEvent("google-map-marker-close",{bubbles:!0}))))}updatePosition(){this.marker&&(this.marker.position=new google.maps.LatLng(this.latitude,this.longitude))}changeMap(t){this.map=t,this.mapChanged()}mapChanged(){this.marker&&(this.marker.map=null,google.maps.event.clearInstanceListeners(this.marker)),this.map&&this.map instanceof google.maps.Map&&this.mapReady()}mapReady(){this.pin=new google.maps.marker.PinElement({glyph:this.glyph,glyphColor:this.glyphColor,background:this.background,borderColor:this.borderColor,scale:this.scale}),this.marker=new google.maps.marker.AdvancedMarkerElement({map:this.map,position:{lat:this.latitude,lng:this.longitude},content:this.pin.element,zIndex:this.zIndex,gmpClickable:!0}),this.marker.element.addEventListener("mouseover",(()=>{this.dispatchEvent(new CustomEvent("mouseover",{detail:{id:this.id},bubbles:!0,composed:!0}))})),this.marker.element.addEventListener("mouseout",(()=>{this.dispatchEvent(new CustomEvent("mouseout",{detail:{id:this.id},bubbles:!0,composed:!0}))})),this.marker.addListener("click",(()=>{this.dispatchEvent(new CustomEvent("click",{detail:{id:this.id},bubbles:!0,composed:!0}))})),this.contentChanged()}contentChanged(){this.contentObserver&&this.contentObserver.disconnect(),this.contentObserver=new MutationObserver(this.contentChanged.bind(this)),this.contentObserver.observe(this,{childList:!0,subtree:!0});const t=this.innerHTML.trim();t?(this.info||(this.info=new google.maps.InfoWindow,this.openInfoHandler=google.maps.event.addListener(this.marker,"click",function(){this.open=!0}.bind(this)),this.closeInfoHandler=google.maps.event.addListener(this.info,"closeclick",function(){this.open=!1}.bind(this))),this.info.setContent(t)):this.info&&(google.maps.event.removeListener(this.openInfoHandler),google.maps.event.removeListener(this.closeInfoHandler),this.info=null)}};t([a({type:Number,reflect:!0}),e("design:type",Object)],h.prototype,"latitude",void 0),t([a({type:Number,reflect:!0}),e("design:type",Object)],h.prototype,"longitude",void 0),t([a({type:Number,reflect:!0,attribute:"z-index"}),e("design:type",Object)],h.prototype,"zIndex",void 0),t([a({type:Boolean,reflect:!0}),e("design:type",Object)],h.prototype,"open",void 0),t([a({type:String,reflect:!0}),e("design:type",String)],h.prototype,"id",void 0),t([a({type:String,reflect:!0}),e("design:type",String)],h.prototype,"glyph",void 0),t([a({type:String,reflect:!0}),e("design:type",String)],h.prototype,"glyphColor",void 0),t([a({type:String,reflect:!0}),e("design:type",String)],h.prototype,"background",void 0),t([a({type:String,reflect:!0}),e("design:type",String)],h.prototype,"borderColor",void 0),t([a({type:Number,reflect:!0}),e("design:type",Number)],h.prototype,"scale",void 0),h=t([n("lit-google-map-marker")],h);let p=class extends s{constructor(){super(...arguments),this.paths=[],this.fillColor="#FF0000",this.fillOpacity=.35,this.strokeColor="#FF0000",this.strokeOpacity=.8,this.strokeWeight=2,this.map=null,this.polygon=null}attachToMap(t){this.map=t,this.mapChanged()}mapChanged(){this.polygon&&(this.polygon.setMap(null),google.maps.event.clearInstanceListeners(this.polygon)),this.map&&this.map instanceof google.maps.Map&&this.mapReady()}mapReady(){this.polygon=new google.maps.Polygon({map:this.map,strokeColor:this.strokeColor,strokeOpacity:this.strokeOpacity,strokeWeight:this.strokeWeight,fillColor:this.fillColor,fillOpacity:this.fillOpacity,paths:this.paths})}};t([a({type:Array}),e("design:type",Array)],p.prototype,"paths",void 0),t([a({type:String,attribute:"fill-color"}),e("design:type",Object)],p.prototype,"fillColor",void 0),t([a({type:Number,attribute:"fill-opacity"}),e("design:type",Object)],p.prototype,"fillOpacity",void 0),t([a({type:String,attribute:"stroke-color"}),e("design:type",Object)],p.prototype,"strokeColor",void 0),t([a({type:Number,attribute:"stroke-opacity"}),e("design:type",Object)],p.prototype,"strokeOpacity",void 0),t([a({type:Number,attribute:"stroke-weight"}),e("design:type",Object)],p.prototype,"strokeWeight",void 0),p=t([n("lit-google-map-polygon")],p);class d{constructor(){this.apiMap={}}require(t,e,i){const s=this.nameFromUrl(t);this.apiMap[s]||(this.apiMap[s]=new u(s,t,i)),this.apiMap[s].requestNotify(e)}static getInstance(){return d.instance||(d.instance=new d),d.instance}nameFromUrl(t){return`${t.replace(/[:/%?&.=\-,]/g,"_")}_api`}}class u{constructor(t,e,i){this.callbackMacro="%%callback%%",this.loaded=!1,this.script=null,this.notifiers=[];let s=e,o=i;if(!o){if(!(s.indexOf(this.callbackMacro)>=0))return void console.error("ScriptLoader class: a %%callback%% parameter is required in libraryUrl");o=`${t}_loaded`,s=s.replace(this.callbackMacro,o)}this.callbackName=o,window[this.callbackName]=this.success.bind(this),this.addScript(s)}addScript(t){const e=document.createElement("script");e.src=t,e.onerror=this.handleError.bind(this);const i=document.querySelector("script")||document.body;i.parentNode.insertBefore(e,i),this.script=e}removeScript(){this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.script=null}handleError(t){this.error=new Error("Library failed to load"),this.notifyAll(),this.cleanup()}success(...t){this.loaded=!0,this.result=t,this.notifyAll(),this.cleanup()}cleanup(){delete window[this.callbackName]}notifyAll(){this.notifiers.forEach(function(t){t(this.error,this.result)}.bind(this)),this.notifiers=[]}requestNotify(t){this.loaded||this.error?t(this.error,this.result):this.notifiers.push(t)}}class g extends s{constructor(){super(...arguments),this.libraryLoaded=!1,this.libraryErrorMessage=null,this.isReady=!1}get callbackName(){return null}libraryUrlChanged(){this.isReady&&null!=this.libraryUrl&&this.loadLibrary()}libraryLoadCallback(t,e){t?(console.warn("Library load failed:",t.message),this.libraryErrorMessage=t.message):(this.libraryErrorMessage=null,this.libraryLoaded=!0,null!=this.notifyEvent&&this.dispatchEvent(new CustomEvent(this.notifyEvent,{detail:e,composed:!0})))}loadLibrary(){d.getInstance().require(this.libraryUrl,this.libraryLoadCallback.bind(this),this.callbackName)}connectedCallback(){super.connectedCallback(),this.isReady=!0,null!=this.libraryUrl&&this.loadLibrary()}}let m=class extends g{constructor(){super(...arguments),this.apiKey="",this.clientId="",this.mapsUrl="https://maps.googleapis.com/maps/api/js?callback=%%callback%%",this.version="3.39",this.language="",this.mapId=""}get libraryUrl(){return this.computeUrl(this.mapsUrl,this.version,this.apiKey,this.clientId,this.language,this.mapId)}get notifyEvent(){return"api-load"}computeUrl(t,e,i,s,o,a){let n=`${t}&v=${e}`;if(n+="&libraries=drawing,geometry,places,visualization,marker",i&&!s&&(n+=`&key=${i}`),s&&(n+=`&client=${s}`),!i&&!s){const t="No Google Maps API Key or Client ID specified. See https://developers.google.com/maps/documentation/javascript/get-api-key for instructions to get started with a key or client id.";console.warn(t)}return o&&(n+=`&language=${o}`),a&&(n+=`&map_ids=${a}`),n}};t([a({type:String,attribute:"api-key"}),e("design:type",Object)],m.prototype,"apiKey",void 0),t([a({type:String,attribute:"client-id"}),e("design:type",Object)],m.prototype,"clientId",void 0),t([a({type:String,attribute:"maps-url"}),e("design:type",Object)],m.prototype,"mapsUrl",void 0),t([a({type:String}),e("design:type",Object)],m.prototype,"version",void 0),t([a({type:String}),e("design:type",Object)],m.prototype,"language",void 0),t([a({type:String,attribute:"map-id"}),e("design:type",Object)],m.prototype,"mapId",void 0),m=t([n("lit-google-maps-api")],m);class y{constructor(t){this.multi=!1,this.selection=[],this.selectCallback=t}get(){return this.multi?this.selection.slice():this.selection[0]}clear(t){for(const e of this.selection.slice())(!t||t.indexOf(e)<0)&&this.setItemSelected(e,!1)}isSelected(t){return this.selection.indexOf(t)>=0}setItemSelected(t,e){if(null!=t&&e!==this.isSelected(t)){if(e)this.selection.push(t);else{const e=this.selection.indexOf(t);e>=0&&this.selection.splice(e,1)}this.selectCallback&&this.selectCallback(t,e)}}select(t){this.multi?this.toggle(t):this.get()!==t&&(this.setItemSelected(this.get(),!1),this.setItemSelected(t,!0))}toggle(t){this.setItemSelected(t,!this.isSelected(t))}}let b=class extends s{constructor(){super(...arguments),this.activateEvent="tap",this.selectedAttribute=null,this.selected=null,this._selection=new y(((t,e)=>this.applySelection(t,e))),this._items=[]}get items(){return this._items}connectedCallback(){super.connectedCallback(),this.addEventListener("slotchange",(t=>{t.stopPropagation(),this.updateItems(),this.dispatchEvent(new CustomEvent("selector-items-changed",{detail:{},composed:!0}))})),this.addListener(this.activateEvent)}disconnectedCallback(){super.disconnectedCallback(),this.removeListener(this.activateEvent)}attributeChangedCallback(t,e,i){if(super.attributeChangedCallback(t,e,i),"selected"===t)this.updateSelected()}applySelection(t,e){this.selectedAttribute&&t instanceof Element&&e!==t.hasAttribute(this.selectedAttribute)&&t.toggleAttribute(this.selectedAttribute)}updateItems(){var t;const e=this.querySelector("slot");this._items=null!==(t=null==e?void 0:e.assignedNodes())&&void 0!==t?t:[]}addListener(t){this.addEventListener(t,(t=>this.activateHandler(t)))}removeListener(t){this.removeEventListener(t,(t=>this.activateHandler(t)))}activateHandler(t){let e=t.target;const i=this.items;for(;e&&e!==this;){const t=i.indexOf(e);if(t>=0){const i=this.indexToValue(t);return void this.itemActivate(i,e)}e=e.parentNode}}itemActivate(t,e){this.dispatchEvent(new CustomEvent("selector-item-activate",{detail:{selected:t,item:e},composed:!0,cancelable:!0}))&&this.select(t)}select(t){this.selected=t}updateSelected(){this.selectSelected(this.selected)}selectSelected(t){if(!this._items)return;const e=this.valueToItem(this.selected);e?this._selection.select(e):this._selection.clear()}valueToItem(t){return null==t?null:this._items[this.valueToIndex(t)]}valueToIndex(t){return Number(t)}indexToValue(t){return t}indexOf(t){return this._items?this._items.indexOf(t):-1}};t([a({type:String,attribute:"activate-event"}),e("design:type",Object)],b.prototype,"activateEvent",void 0),t([a({type:String,attribute:"selected-attribute"}),e("design:type",String)],b.prototype,"selectedAttribute",void 0),t([a({type:Number,reflect:!0}),e("design:type",Object)],b.prototype,"selected",void 0),b=t([n("lit-selector")],b);export{r as LitGoogleMap,l as LitGoogleMapCircle,c as LitGoogleMapLocationButton,h as LitGoogleMapMarker,p as LitGoogleMapPolygon,m as LitGoogleMapsApi,b as LitSelector};
